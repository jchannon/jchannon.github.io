<!doctype html>
<!-- Microdata markup added by Google Structured Data Markup Helper. -->
<!--[if lt IE 7 ]><html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]><html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]><html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]><html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><html lang="en" class="no-js"> <![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="keywords" content="">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta http-equiv="last-modified" content="2014-08-13T10:18:52.4007614+01:00" />
    <meta name="google-site-verification" content="9bvoj2jXRyykef2Tg72C0Am15YBTqDF0RgeZ84tUytE" />
        <title>Jonathan Channon Blog</title>
    <link href='http://fonts.googleapis.com/css?family=Lato:300,400,700%7CCourgette' rel='stylesheet' type='text/css'>
    <link href="/css/style.css" media="screen" rel="stylesheet">
    <link href="/css/screen.css" media="screen" rel="stylesheet">
    <link rel="alternate" type="application/rss+xml" title="Jonathan Channon Blog" href="/feed.xml" />
</head>

<body>
<div itemscope itemtype="http://schema.org/Article" class="body_wrap">
    
    
    <div class="logo">
        <strong><a href="index.html">Blog</a></strong>
        <div class="logo_description">curated by Jonathan Channon</div>
    </div>
    
    <!-- header -->
    <div class="header">            
        <div class="header_inner">
            <!-- topmenu -->    
            <nav id="topmenu" class="clearfix">
                <ul class="dropdown">
                    <li class="menu-item-blue"><a href="/"><span>Home</span></a></li>
                    <li class="menu-item-green"><a href="/about"><span>About Me</span></a></li>               
                    <li class="menu-item-red"><a href="http://jonathanchannon.com"><span>Resume</span></a></li>
                    <li class="menu-item-pink"><a href="/archive"><span>Archive</span></a></li>
                    <li class="menu-item-purple"><a href="/contact"><span>Contact</span></a></li>
                </ul>
            
            <select id="topm-select" onChange="location = this.value">
                <option value="">Site Navigation</option>
                <option value="/">Home</option>
                <option value="/about">About Me</option>
                <option value="http://www.jonathanchannon.com">Resume</option>
                <option value="/archive">Archive</option>
                <option value="/contact">Contact</option>
            </select>
            </nav>    
            <!--/ topmenu -->

        </div>
    </div>
    <!--/ header -->    

    <!-- middle -->
    <div id="middle" class="full_width">
        <div class="container clearfix">                        
            <!-- content -->
            <div class="">
                  

    <div class="post-item boxed post-detail">
      <span class="post-label label-quotes"></span>           
      <div class="post-title">
        <h1><a href="/2013/10/01/blogging-with-markdown-and-git/">Blogging with Markdown &amp; Deploying via Git - Introducing Sandra.Snow</a></h1>
      </div>
      <div class="post-meta-top">
          <span class="post-date">October 01, 2013</span> <!-- <span class="post-author">Jonathan Channon</span> -->
          <!-- <span class="link-comments"></span> -->
          <div class="commentcount" data-disqus-url="http://blog.jonathanchannon.com/2013/10/01/blogging-with-markdown-and-git/"></div>
      </div>
      <!-- <div class="post-image"><img src="images/temp/slider_1_1.jpg" alt=""></div> -->
      <div class="post-descr entry">
          <p>There are many markdown blogging engines out there such as <a href="http://calepin.co/">Calepin</a>, <a href="http://scriptogr.am/">Scriptogram</a> and even <a href="http://wordpress.org/">WordPress</a> allows you to write blog posts in Markdown but <a href="https://github.com/Sandra/Sandra.Snow">Sandra.Snow</a> tries to add something different.  Firstly, it is written in .Net and <a href="http://nancyfx.org">Nancy</a>, secondly its a static blog generator and finally it supports Git deployment.</p>

<p>Even if you don't want to use Git deployment you can use FTP, its a great tool.  To write your blog post in Markdown you need a custom header in your file so it knows some information about your post.</p>

<pre><code>---
layout: post
category: Azure
title: Setting up a ServiceStack Service
---
</code></pre>

<p>It then parses this information along with your Markdown into its engine, uses a Markdown view engine to convert the file content into HTML, assign model properties based on the header and creates a HTML file using the model via a Razor viewengine.</p>

<p>The "layout" refers to the Razor file it uses to render the final HTML file.  This allows you to style your pages and blog posts whichever way you'd prefer.  These "layout" files should exist in the "_layouts" folder for your site template.  The site template is a set of files and folders that Sandra.Snow uses to produce the final static website.</p>

<p>The "category" or "categories" property, you can use both for singular or multiple comma-seperated values that refer to the category/categories of your blog post.</p>

<p>The "title" should hopefully be self explanatory!</p>

<p>You can optionally add an author and email properties to override the global config settings for example, if you wanted to allow guest author blog posts.  There is also an optional metadescription property you can use for SEO.

      </div>
      <p><a class="readmore" href="/2013/10/01/blogging-with-markdown-and-git/">Read more...</a></p>            
    </div>
    <div class="post-item boxed post-detail">
      <span class="post-label label-quotes"></span>           
      <div class="post-title">
        <h1><a href="/2013/09/20/returning-multiple-fake-objects-with-fakeiteasy/">Returning multiple fake objects with FakeItEasy</a></h1>
      </div>
      <div class="post-meta-top">
          <span class="post-date">September 20, 2013</span> <!-- <span class="post-author">Jonathan Channon</span> -->
          <!-- <span class="link-comments"></span> -->
          <div class="commentcount" data-disqus-url="http://blog.jonathanchannon.com/2013/09/20/returning-multiple-fake-objects-with-fakeiteasy/"></div>
      </div>
      <!-- <div class="post-image"><img src="images/temp/slider_1_1.jpg" alt=""></div> -->
      <div class="post-descr entry">
          <p>I was recently writing some unit tests where I needed to test that multiple calls to an interface returned different objects.  </p>

<p>With <a href="https://github.com/FakeItEasy/FakeItEasy">FakeItEasy</a> this is easy:</p>

<pre><code>A.CallTo(() =&gt; myInterface.GetSomething(1)).Returns(new Something())
</code></pre>

<p>All very nice, but now if I have multiple calls to <code>myInterface</code> I have to execute the above statement 'x' amount of times:</p>

<pre><code>[Fact]
public void Should_Do_Something()
{
  var myInterface = A.Fake&lt;IApplication&gt;();
  A.CallTo(() =&gt; myInterface.GetSomething(1)).Returns(new Something());
  A.CallTo(() =&gt; myInterface.GetSomething(2)).Returns(new Something());
  A.CallTo(() =&gt; myInterface.GetSomething(3)).Returns(new Something());

  var result = sut.DoSomething(myInterface);

  Assert.Equal("Super Duper", result);
}
</code></pre>


      </div>
      <p><a class="readmore" href="/2013/09/20/returning-multiple-fake-objects-with-fakeiteasy/">Read more...</a></p>            
    </div>
    <div class="post-item boxed post-detail">
      <span class="post-label label-quotes"></span>           
      <div class="post-title">
        <h1><a href="/2013/09/16/enabling-cors-in-iisexpress/">Enabling CORS in IISExpress</a></h1>
      </div>
      <div class="post-meta-top">
          <span class="post-date">September 16, 2013</span> <!-- <span class="post-author">Jonathan Channon</span> -->
          <!-- <span class="link-comments"></span> -->
          <div class="commentcount" data-disqus-url="http://blog.jonathanchannon.com/2013/09/16/enabling-cors-in-iisexpress/"></div>
      </div>
      <!-- <div class="post-image"><img src="images/temp/slider_1_1.jpg" alt=""></div> -->
      <div class="post-descr entry">
          <p>I was playing around with <a href="https://github.com/wordnik/swagger-ui">swagger-ui</a> and was trying to point it to a local endpoint that I started with IIS Express.  I was getting an error saying that it needed the endpoint to accept Access-Control-Allow-Origin requests.</p>

<p>I went Googling and it couldn't find anything specific to IIS Express but managed to use some guidance for full blown IIS.</p>

<p>The solution is to go to <code>C:\Program Files (x86)\IIS Express\AppServer</code> and open the <code>applicationhost.config</code> file.</p>

<p>Search for <code>httpProtocol</code> and you should see this:</p>

<pre><code>&lt;httpProtocol&gt;
    &lt;customHeaders&gt;
        &lt;clear /&gt;
        &lt;add name="X-Powered-By" value="ASP.NET" /&gt;
    &lt;/customHeaders&gt;
    &lt;redirectHeaders&gt;
        &lt;clear /&gt;
    &lt;/redirectHeaders&gt;
&lt;/httpProtocol&gt;
</code></pre>

<p>Now add this to the <code>customHeaders</code> node:</p>

<pre><code>&lt;add name="Access-Control-Allow-Origin" value="*" /&gt;
&lt;add name="Access-Control-Allow-Headers" value="Content-Type" /&gt;
</code></pre>

<p>Just bear in mind this opens up your webserver so you may need to find something alternative for a live production environment.</p>

<p>Anyway you should now be able to start accepting requests via CORS when you fire up IISExpress</p>

      </div>
    </div>
    <div class="post-item boxed post-detail">
      <span class="post-label label-quotes"></span>           
      <div class="post-title">
        <h1><a href="/2013/09/12/keeping-sql-data-organised-in-integration-tests/">Keeping SQL Data Organised in Integration Tests</a></h1>
      </div>
      <div class="post-meta-top">
          <span class="post-date">September 12, 2013</span> <!-- <span class="post-author">Jonathan Channon</span> -->
          <!-- <span class="link-comments"></span> -->
          <div class="commentcount" data-disqus-url="http://blog.jonathanchannon.com/2013/09/12/keeping-sql-data-organised-in-integration-tests/"></div>
      </div>
      <!-- <div class="post-image"><img src="images/temp/slider_1_1.jpg" alt=""></div> -->
      <div class="post-descr entry">
          <p>In my latest project I had kept my solution tidy with my main app project, my unit test project and integration test project. I tend to stick with a naming convention such as MainApp, MainApp.Tests.Unit &amp; MainApp.Tests.Integration.</p>

<p>I had begun writing my integration tests for a repository that hits the database and returns data. Currently it was one method being called in the repository.  <a href="http://xunit.codeplex.com/">xUnit</a> allows you to setup any test dependencies in the constructor of your test class.  It also allows you to do any tidying up in a Dispose method if you implement IDisposable although this is <a href="http://xunit.codeplex.com/wikipage?title=Comparisons&amp;referringTitle=Home#note2">frowned upon</a>.  However I felt for my needs I would implement this.</p>

<p>I  was creating data in the database in the constructor which will get called before the test runs, retrieving data in the test, asserting and then deleting all data and resetting the auto-incrementing from the tables in the Dispose method.</p>

<p>This was working perfectly until I wanted to test another method on my repository.</p>

<p>I now needed to add data for my new method but realised if I added different data to the database in the constructor, I would be creating unnecessary data unrelated to the test.</p>

<p>My options were to move the constructor logic into separate methods and then call the methods in the test or have separate test classes per method in the repo.  Both were a not an ideal solution and quite frankly verbose, ugly and not best practice.

      </div>
      <p><a class="readmore" href="/2013/09/12/keeping-sql-data-organised-in-integration-tests/">Read more...</a></p>            
    </div>
    <div class="post-item boxed post-detail">
      <span class="post-label label-quotes"></span>           
      <div class="post-title">
        <h1><a href="/2013/09/11/comparing-object-instances-with-fakeiteasy/">Comparing object instances with FakeItEasy</a></h1>
      </div>
      <div class="post-meta-top">
          <span class="post-date">September 11, 2013</span> <!-- <span class="post-author">Jonathan Channon</span> -->
          <!-- <span class="link-comments"></span> -->
          <div class="commentcount" data-disqus-url="http://blog.jonathanchannon.com/2013/09/11/comparing-object-instances-with-fakeiteasy/"></div>
      </div>
      <!-- <div class="post-image"><img src="images/temp/slider_1_1.jpg" alt=""></div> -->
      <div class="post-descr entry">
          <p>I had the task of writing a new application recently and of course I chose <a href="http://nancyfx.org">Nancy</a>.  One of the many great reasons is the testing capabilites it offers (For more on that see <a href="http://www.marcusoft.net/2013/01/NancyTesting1.html">this</a> great series of articles).</p>

<p>The basics of a test with Nancy looks like this:</p>

<pre><code>[Fact]
public void Should_return_status_ok_when_route_exists()
{
    // Given
    var bootstrapper = new DefaultNancyBootstrapper();
    var browser = new Browser(bootstrapper);

    // When
    var result = browser.Get("/", with =&gt; {
        with.HttpRequest();
    });

    // Then
    Assert.Equal(HttpStatusCode.OK, result.StatusCode);
}
</code></pre>

<p>You set up a bootstrapper, this can be your live one or an inherited version of your live one with dependencies changed to mocks for example or use the <code>ConfigurableBootstrapper</code>.</p>


      </div>
      <p><a class="readmore" href="/2013/09/11/comparing-object-instances-with-fakeiteasy/">Read more...</a></p>            
    </div>
  <!-- Pagination links -->
  <div class="text-center">

        <a href="/page2">Previous Page</a> | 



      <a href="/page4">Next Page</a>

  </div>


            </div>
                <!-- #content -->
         </div>
    </div>
    <!--/ middle -->

    <!-- footer social -->
    <div class="footer_social">
        <div class="footer_social_inner">
            <div class="container">     
              <!-- <a href="post-details.html#" class="social-fb">Facebook</a> -->
                <a href="http://twitter.com/jchannon" class="social-twitter">Twitter</a>
                <a href="http://github.com/jchannon" class="social-github">Github</a>
                <a href="http://uk.linkedin.com/in/jonathanchannon/" class="social-linkedin">Linked In</a>
                <a href="/feed.xml" class="social-rss">RSS Feed</a>
            </div> 
        </div>
    </div>
    <!--/ footer social -->

    <div class="footer">
        <div class="container">
            <p class="copyright"><a href="https://github.com/Sandra/Sandra.Snow">Powered by Sandra.Snow</a></p>        
        </div> 
    </div>

    </div>
    
    <!-- main JS libs  -->
    <script src="/js/libs/modernizr.min.js"></script>
    <script src="/js/libs/respond.min.js"></script>                   
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

    <!-- scripts  -->
    <script src="/js/general.js"></script>
    <script src="/js/hoverIntent.js"></script>

    <script type='text/javascript'>
      $(function () {
        $("pre code").parent().each(function () {
          if (!$(this).hasClass("prettyprint")) {
            $(this).addClass("prettyprint");
            a = true
          }
        });

        //prettyPrint();
      });
    </script>
    <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js?skin=sons-of-obsidian"></script>
    <script type="text/javascript">
var _gaq = _gaq || [];

_gaq.push(['_setAccount', 'UA-7138405-4']);
_gaq.push(['_trackPageview']);
        
(function () {
    var ga = document.createElement('script');
    ga.type = 'text/javascript';
    ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(ga, s);
})();
</script>
    
</body>
</html>
