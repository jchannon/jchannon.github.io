<!doctype html>
<!-- Microdata markup added by Google Structured Data Markup Helper. -->
<!--[if lt IE 7 ]><html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]><html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]><html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]><html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><html lang="en" class="no-js"> <![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="keywords" content="">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta http-equiv="last-modified" content="2017-06-07T15:49:30.9638585+01:00" />
    <meta name="google-site-verification" content="9bvoj2jXRyykef2Tg72C0Am15YBTqDF0RgeZ84tUytE" />
        <title>Jonathan Channon Blog</title>
    <link href='http://fonts.googleapis.com/css?family=Lato:300,400,700%7CCourgette' rel='stylesheet' type='text/css'>
    <link href="/css/style.css" media="screen" rel="stylesheet">
    <link href="/css/screen.css" media="screen" rel="stylesheet">
    <link rel="alternate" type="application/rss+xml" title="Jonathan Channon Blog" href="/feed.xml" />
</head>

<body>
<div itemscope itemtype="http://schema.org/Article" class="body_wrap">
    
    
    <div class="logo">
        <strong><a href="index.html">Blog</a></strong>
        <div class="logo_description">curated by Jonathan Channon</div>
    </div>
    
    <!-- header -->
    <div class="header">            
        <div class="header_inner">
            <!-- topmenu -->    
            <nav id="topmenu" class="clearfix">
                <ul class="dropdown">
                    <li class="menu-item-blue"><a href="/"><span>Home</span></a></li>
                    <li class="menu-item-green"><a href="/about"><span>About Me</span></a></li>               
                    <li class="menu-item-red"><a href="http://jonathanchannon.com"><span>Resume</span></a></li>
                    <li class="menu-item-pink"><a href="/archive"><span>Archive</span></a></li>
                    <li class="menu-item-purple"><a href="/contact"><span>Contact</span></a></li>
                </ul>
            
            <select id="topm-select" onChange="location = this.value">
                <option value="">Site Navigation</option>
                <option value="/">Home</option>
                <option value="/about">About Me</option>
                <option value="http://www.jonathanchannon.com">Resume</option>
                <option value="/archive">Archive</option>
                <option value="/contact">Contact</option>
            </select>
            </nav>    
            <!--/ topmenu -->

        </div>
    </div>
    <!--/ header -->    

    <!-- middle -->
    <div id="middle" class="full_width">
        <div class="container clearfix">                        
            <!-- content -->
            <div class="">
                  

    <div class="post-item boxed post-detail">
      <span class="post-label label-quotes"></span>           
      <div class="post-title">
        <h1><a href="/2017/06/07/debugging-netcore-docker/">Debugging .Net Core apps inside Docker container with VSCode</a></h1>
      </div>
      <div class="post-meta-top">
          <span class="post-date">June 07, 2017</span> <!-- <span class="post-author">Jonathan Channon</span> -->
          <!-- <span class="link-comments"></span> -->
          <div class="commentcount" data-disqus-url="http://blog.jonathanchannon.com/2017/06/07/debugging-netcore-docker/"></div>
      </div>
      <!-- <div class="post-image"><img src="images/temp/slider_1_1.jpg" alt=""></div> -->
      <div class="post-descr entry">
          <p>So by now using .Net Core on Linux is old news, everyone is doing it and deploying their production apps on Kubernetes to reach peak "I can scale" points.  However, one thing that can get tricky is when you have a requirement to debug an application in a container.  I believe VS on Windows and VS for Mac has some sort of capability to do that (I have no idea what it does underneath but hey who cares I can right click debug right!?) but the information about doing this in VSCode is a bit sketchy.  I tend to use VSCode on OSX the most so I wanted to see how I could do this.</p>

<p>For demonstration purposes lets take a very simple application and we are going to publish it as a self contained application ie/one that has all the runtime and application binaries outputted so you don't have to install dotnet in a container.</p>

<p>To be able to debug that application we are going to need VSDBG(the .Net Core command line debugger) inside the container.</p>

<p><code>curl -sSL https://aka.ms/getvsdbgsh | bash /dev/stdin -v latest -l ~/vsdbg</code></p>

<p>We are also going to need to append the launch.json for VSCode in your project's root to have the below:</p>

<pre><code>{
    "name": ".NET Core Remote Attach",
    "type": "coreclr",
    "request": "attach",
    "processId": "${command:pickRemoteProcess}",
    "pipeTransport": {
        "pipeProgram": "bash",
        "pipeArgs": [ "-c", "docker exec -i json ${debuggerCommand}" ],
        "debuggerPath": "/root/vsdbg/vsdbg",
        "pipeCwd": "${workspaceRoot}",
        "quoteArgs": true
    },
    "sourceFileMap": {
        "/Users/jonathan/Projects/jsonfile": "${workspaceRoot}"
    },
    "justMyCode": true
}
</code></pre>


      </div>
      <p><a class="readmore" href="/2017/06/07/debugging-netcore-docker/">Read more...</a></p>            
    </div>
    <div class="post-item boxed post-detail">
      <span class="post-label label-quotes"></span>           
      <div class="post-title">
        <h1><a href="/2017/05/15/using-docker-with-netcore-ci/">Using Docker with .Net Core in CI for OSS</a></h1>
      </div>
      <div class="post-meta-top">
          <span class="post-date">May 15, 2017</span> <!-- <span class="post-author">Jonathan Channon</span> -->
          <!-- <span class="link-comments"></span> -->
          <div class="commentcount" data-disqus-url="http://blog.jonathanchannon.com/2017/05/15/using-docker-with-netcore-ci/"></div>
      </div>
      <!-- <div class="post-image"><img src="images/temp/slider_1_1.jpg" alt=""></div> -->
      <div class="post-descr entry">
          <p>I recently wrote a <a href="http://blog.jonathanchannon.com/2017/05/04/announcing-botwin/">project</a> for <a href="https://t.co/kpkdInRgwG">ASP.NET Core 2</a>  and the time had come to get a CI system up and running.  I develop on OSX and mainly test on OSX &amp; Linux and so the defacto place to go is TravisCI.  I've used it in the past and all has been great but I put out a tweet asking if Travis was still the place to go:</p>

<blockquote class="twitter-tweet" data-partner="tweetdeck"><p lang="en" dir="ltr">Is Travis still the go to Linux CI tool for OSS?</p>â€” Jonathan Channon (@jchannon) <a href="https://twitter.com/jchannon/status/860979690462474240">May 6, 2017</a></blockquote>

<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>


      </div>
      <p><a class="readmore" href="/2017/05/15/using-docker-with-netcore-ci/">Read more...</a></p>            
    </div>
    <div class="post-item boxed post-detail">
      <span class="post-label label-quotes"></span>           
      <div class="post-title">
        <h1><a href="/2017/05/04/announcing-botwin/">Announcing Botwin</a></h1>
      </div>
      <div class="post-meta-top">
          <span class="post-date">May 04, 2017</span> <!-- <span class="post-author">Jonathan Channon</span> -->
          <!-- <span class="link-comments"></span> -->
          <div class="commentcount" data-disqus-url="http://blog.jonathanchannon.com/2017/05/04/announcing-botwin/"></div>
      </div>
      <!-- <div class="post-image"><img src="images/temp/slider_1_1.jpg" alt=""></div> -->
      <div class="post-descr entry">
          <p>Whilst keeping my eye on what's going on in .NET Core v2 I came across some planned changes for ASP.NET Core regarding the <a href="https://github.com/aspnet/Routing/blob/dev/src/Microsoft.AspNetCore.Routing/RequestDelegateRouteBuilderExtensions.cs">routing</a>.  I had also read this <a href="https://www.strathweb.com/2017/01/building-microservices-with-asp-net-core-without-mvc/">blog post</a> from <a href="https://twitter.com/filip_woj">Filip</a> about using the planned changes for microservices and a lightbulb went off in my head.  I thought to myself I wonder if I could adapt the new extensions to create Nancy-esque routing.  Turns out, I could!</p>

<h3>Sample</h3>

<pre><code>public class ActorsModule : BotwinModule
{
    public ActorsModule()
    {
        this.Get("/", async (req, res, routeData) =&gt;
        {
            await res.WriteAsync("Hello World!");
        });
    }
}
</code></pre>

<p>
      </div>
      <p><a class="readmore" href="/2017/05/04/announcing-botwin/">Read more...</a></p>            
    </div>
    <div class="post-item boxed post-detail">
      <span class="post-label label-quotes"></span>           
      <div class="post-title">
        <h1><a href="/2016/07/13/building-all-current-dotnet-core-projects-vscode/">Building all and current dotnet core projects in VSCode</a></h1>
      </div>
      <div class="post-meta-top">
          <span class="post-date">July 13, 2016</span> <!-- <span class="post-author">Jonathan Channon</span> -->
          <!-- <span class="link-comments"></span> -->
          <div class="commentcount" data-disqus-url="http://blog.jonathanchannon.com/2016/07/13/building-all-current-dotnet-core-projects-vscode/"></div>
      </div>
      <!-- <div class="post-image"><img src="images/temp/slider_1_1.jpg" alt=""></div> -->
      <div class="post-descr entry">
          <p>As you may or may not know I try to work on OSX as much as possible and with .Net that's quite painful to be honest.  Things are moving along nicely with Jetbrains Rider,
VSCode, Xamarin and Omnisharp.  I'll be honest, none of them are perfect and I often find myself using Visual Studio in a VM because it just works (yes, its clunky etc etc).
Recently, VSCode got a 1.3 release with some new features, tabs being one of them.  I never really got on with VSCode so dismissed it most of the time but this new release
opened my eyes a bit more and thought I'd give it a go.  Its C# support now runs on .Net Core RTM and most of my work at the moment is porting projects to .Net Core so it seemed
this would be worthwhile.  I've tried to setup keybindings that are the ones I know from Visual Studio and installed couple of extensions to make things easier and prettier.  </p>

<p>As VSCode is language agnostic the one thing I found was how to build .Net Core projects was a bit off.  For each project you have you have to configure a task runner.  VSCode tries to 
help you here and gives you a few languages to choose from.  For .Net Core it creates a <code>dotnet build</code> task.  The problem with this is that it runs that command from the workspace root, 
ie the folder where VSCode is opened.  What if you open it from the git root folder and your project(s) are under a src/MyProject folder?  It will fail as it cant find project.json.
What you can do is set the <code>cwd</code> to be a specific directory by hardcoding it in the task configuration but thats not great if you have multiple projects.  You could use some predefined
variables that VSCode provides eg/<code>${fileDirname}</code> but again if you are in a folder 4 levels deep that wont work either.

      </div>
      <p><a class="readmore" href="/2016/07/13/building-all-current-dotnet-core-projects-vscode/">Read more...</a></p>            
    </div>
    <div class="post-item boxed post-detail">
      <span class="post-label label-quotes"></span>           
      <div class="post-title">
        <h1><a href="/2016/06/27/porting-owin-middleware-aspnetcore/">Porting OWIN middleware to ASP.Net Core</a></h1>
      </div>
      <div class="post-meta-top">
          <span class="post-date">June 27, 2016</span> <!-- <span class="post-author">Jonathan Channon</span> -->
          <!-- <span class="link-comments"></span> -->
          <div class="commentcount" data-disqus-url="http://blog.jonathanchannon.com/2016/06/27/porting-owin-middleware-aspnetcore/"></div>
      </div>
      <!-- <div class="post-image"><img src="images/temp/slider_1_1.jpg" alt=""></div> -->
      <div class="post-descr entry">
          <p>In our application at work we make use of various middleware and as we are making everything run on .Net Core the time has come to port said middleware to .Net Core.  If you don't already know ASP.Net Core has a bridge that allows you to use OWIN components in an ASP.Net Core application.  This will convert the HttpContext into a OWIN environment dictionary on input and then back again on output.</p>

<p>Lets take an example of some middleware</p>

<pre><code>public class MyMiddleware
{
    private readonly Func&lt;IDictionary&lt;string, object&gt;, Task&gt; nextFunc;
    private readonly OwinUserMiddlewareOptions options;

    public OwinUserMiddleware(Func&lt;IDictionary&lt;string, object&gt;, Task&gt; nextFunc, MyMiddlewareOptions options)
    {
        this.options = options;
        this.nextFunc = nextFunc;
    }

    public Task Invoke(IDictionary&lt;string, object&gt; environment)
    {
        //Everything is awesome
        return nextFunc(environment);
    }
}

public static class MyMiddlewareExtensions
{
    public static IAppBuilder UseMyMiddleware(this IAppBuilder app, MyMiddlewareOptions options = null)
    {
        return app.Use(typeof(MyMiddleware), options);
    }
}
</code></pre>

<p>
      </div>
      <p><a class="readmore" href="/2016/06/27/porting-owin-middleware-aspnetcore/">Read more...</a></p>            
    </div>
  <!-- Pagination links -->
  <div class="text-center">



      <!--<a href="/">Previous Page</a>-->

      <a href="/page2">Next Page</a>

  </div>


            </div>
                <!-- #content -->
         </div>
    </div>
    <!--/ middle -->

    <!-- footer social -->
    <div class="footer_social">
        <div class="footer_social_inner">
            <div class="container">     
              <!-- <a href="post-details.html#" class="social-fb">Facebook</a> -->
                <a href="http://twitter.com/jchannon" class="social-twitter">Twitter</a>
                <a href="http://github.com/jchannon" class="social-github">Github</a>
                <a href="http://uk.linkedin.com/in/jonathanchannon/" class="social-linkedin">Linked In</a>
                <a href="/feed.xml" class="social-rss">RSS Feed</a>
            </div> 
        </div>
    </div>
    <!--/ footer social -->

    <div class="footer">
        <div class="container">
            <p class="copyright"><a href="https://github.com/Sandra/Sandra.Snow">Powered by Sandra.Snow</a></p>        
        </div> 
    </div>

    </div>
    
    <!-- main JS libs  -->
    <script src="/js/libs/modernizr.min.js"></script>
    <script src="/js/libs/respond.min.js"></script>                   
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

    <!-- scripts  -->
    <script src="/js/general.js"></script>
    <script src="/js/hoverIntent.js"></script>

    <script type='text/javascript'>
      $(function () {
        $("pre code").parent().each(function () {
          if (!$(this).hasClass("prettyprint")) {
            $(this).addClass("prettyprint");
            a = true
          }
        });

        //prettyPrint();
      });
    </script>
    <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?skin=sons-of-obsidian"></script>
    <script type="text/javascript">
var _gaq = _gaq || [];

_gaq.push(['_setAccount', 'UA-7138405-4']);
_gaq.push(['_trackPageview']);
        
(function () {
    var ga = document.createElement('script');
    ga.type = 'text/javascript';
    ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(ga, s);
})();
</script>
    
</body>
</html>
